<!doctype html>

<html>
    <div class = "main_container">
        <link rel="stylesheet" href="styles.css">
        <div class= "intestazione">
             <div class = "logo"><center>logo</center></div>
             <div class = "nome"><center>nome</center></div>
        </div>
    

    
        <div class = "ricerca">
            <textarea name = "barraRicerca" rows = "1"  columns = "30"></textarea>
            <input name = "bottoneRicerca" type = "button" onclick = "cercaLuogo();" value = "cerca" class = "pulsanteRicerca">
        </div>
        <div class = "risultati">
            <div class = "allarme">
                gatto di merda<br><br>
                <img src="idle_pic.jpg" height = "80%" width = "80%" id = "ALLARME">
            </div>
            <div class = "risultatiRicerca">
                <p id = "area_risultati">mieo</p>
            </div>
        </div>
        
    </div>

</html>

<script>
//onclick='updateAllarme(this);'
var statoAllarme = 0; //0 = idle, 1 = no pericolo, 2 = si pericolo

function updateAllarme() {
    statoAllarme++;
    if(statoAllarme == 0){
        document.getElementById("ALLARME").src = "idle_pic.jpg";
        document.getElementById("area_risultati").innerHTML = "guarda qui a sinistra"
    }else if(statoAllarme == 1){
        document.getElementById("ALLARME").src = "NESSUN_RISCHIO.jpg";
    }else if(statoAllarme == 2){
        document.getElementById("ALLARME").src = "ATTENTO.jpg";
        statoAllarme = -1;
    }
}

function cercaLuogo(){

    const apiUrl = 'http://api.weatherapi.com/v1/current.json?key=50aeef4823b642bfa16171055241012&q=Dakar&aqi=no';

    fetch(apiUrl)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            // Display data in an HTML element
            document.getElementById("area_risultati").innerHTML = = JSON.stringify(data, null, 2);
        })
        .catch(error => {
        console.error('Error:', error);
    });



    updateAllarme();

}

</script>
